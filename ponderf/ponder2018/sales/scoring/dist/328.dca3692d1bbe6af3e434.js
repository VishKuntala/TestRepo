(self.webpackChunkleafletapp=self.webpackChunkleafletapp||[]).push([[328,151],{7151:(e,t,r)=>{"use strict";r.r(t),r.d(t,{html:()=>n});var n=function(e){return e.adminUser,e.id,'<div class="center aligned">\n  <input data-publish-attr="compareSvid" type="checkbox" name="chkCompareSvid" id="chkCompareSvid">\n</div>'}},4172:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var n=r(3609),a=r.n(n),i=r(7826),o=r(180),s=r(7858),c=r(1900),d=r(6788),u=r(2281),p=r(7151);function l(e,t,r,n,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,a)}function v(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){l(i,n,a,o,s,"next",e)}function s(e){l(i,n,a,o,s,"throw",e)}o(void 0)}))}}const m=function(e){var t=e.adminUser,r=e.instance,n=function(){var e=v(regeneratorRuntime.mark((function e(){var t,n,i,o,s,c,d,u,p,l,v,m,f,h,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.store,n=t.svIds,i=t.salesRepId,o=t.statecode,s=t.covScore,c=t.fiveg,d=t.band14,u=t.tputText,p=t.roamingDependency,l=t.zipcode,v=t.smId,m=t.sortCriteria,f=t.legacyPen,""!==v||""!==i){e.next=3;break}return e.abrupt("return");case 3:return n&&(n="'"+n.split(",").join("','")+"'"),i&&(i="'"+i.split(",").join("','")+"'"),o&&(o="'"+o.split(",").join("','")+"'"),s&&(s="'"+s.split(",").join("','")+"'"),c&&(c="'"+c.split(",").join("','")+"'"),d&&(d="'"+d.split(",").join("','")+"'"),u&&(u="'"+u.split(",").join("','")+"'"),p&&(p="'"+p.split(",").join("','")+"'"),l&&(l="'"+l.split(",").join("','")+"'"),f&&(f="'"+f.split(",").join("','")+"'"),h={smId:v,salesRepId:i,sortCriteria:m,svIds:n||"",zipcode:l||"",statecode:o||"",covScore:s||"",fiveg:c||"",band14:d||"",tputText:u||"",roamingDependency:p||"",limit:"500",legacyPen:f||""},e.next=16,a().ajax({url:"/sales/scoring/Scoring.aspx/SVData",headers:{"Content-Type":"application/json"},type:"post",data:JSON.stringify(h),processData:!1});case 16:return g=e.sent,e.abrupt("return",g.d);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return p.html({adminUser:t,id:r.id}),{prependColumns:null,appendColumns:null,initSubscriptions:function(){r.stateManager.subscribe("mapData",function(){var e=v(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.Z(500,t),e.next=3,r.reloadTableData(n);case 3:r.table&&r.table.columns.adjust(),a()(window).resize();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),r.stateManager.subscribe("removeAllCards",function(){var e=v(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a()("#chkCompareSvid:checked").prop("checked",!1),r.store.compareSvids=[],a()("#chkCompareSvid:not(:checked)").removeAttr("disabled");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),r.stateManager.subscribe("removeCard",function(){var e=v(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&!o.Z(Array,t)&&(a()('input[type="checkbox"][rowid="'.concat(t,'"]')).prop("checked",!1),r.store.compareSvids=s.Z([t],r.store.compareSvids),r.store.compareSvids.length<2&&a()("#chkCompareSvid:not(:checked)").removeAttr("disabled"));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),r.stateManager.subscribe("sortCriteria",function(){var e=v(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:return a=e.sent,e.next=5,r.reloadTableData(a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),r.stateManager.subscribe("compareSvid",function(){var e=v(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n="".concat(t.svid,"_").concat(t.latitude,"_").concat(t.longitude),t&&!o.Z(Array,t)&&(c.Z(n,r.store.compareSvids)?(r.store.compareSvids=s.Z([n],r.store.compareSvids),r.store.cardsData=d.Z((function(e){return e.id!==n}),r.store.cardsData),r.store.compareSvids.length<2&&a()("#chkCompareSvid:not(:checked)").removeAttr("disabled")):r.store.compareSvids.length<2&&(r.store.compareSvids=u.Z(n,r.store.compareSvids),r.store.cardsData=u.Z({id:n,title:t.svid_name,description:""},r.store.cardsData),2===r.store.compareSvids.length&&a()("#chkCompareSvid:not(:checked)").attr("disabled",!0))),r.store.cardsData.length?a()(".ponderCards.message").removeClass("hidden").addClass("visible"):a()(".ponderCards.message").removeClass("visible").addClass("hidden");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},createdCell:function(e,t,r,n,i){isNaN(t)||a()(e).addClass("center aligned")},nowrap:!0,dataSrc:function(e){return r.store.filterClusterTable?d.Z(r.store.filterClusterTable,e.d):e.d},dataTableConfig:{searching:!0,paging:!0,pageLength:6,scrollX:!0,fixedColumns:{leftColumns:2},lengthChange:!1,createdRow:function(e,t,r){var n=a()(e).find('input[type="checkbox"]'),i="".concat(t.svid,"_").concat(t.latitude,"_").concat(t.longitude);a()(n[0]).attr("rowid",i)}},attachEventHandlers:function(){var e=v(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a()("#"+r.id).off().on("draw.dt",(function(){a()("#chkCompareSvid:checked").prop("checked",!1);for(var e=0;e<r.store.compareSvids.length;e+=1)a()('input[type="checkbox"][rowid="'.concat(r.store.compareSvids[e],'"]')).prop("checked",!0);r.store.compareSvids.length>=2?a()("#chkCompareSvid:not(:checked)").attr("disabled",!0):a()("#chkCompareSvid:not(:checked)").removeAttr("disabled")})),a()("#".concat(r.id," tbody")).on("click","tr",(function(){var e=a()(this).closest("tr"),t=r.table.row(e).data();r.store.zoomToPoint=[t.latitude,t.longitude,Date.now().toString()]}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}}},7826:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(1353),a=r(1294),i=r(950),o=r(5643),s=function(){function e(e,t){this.xf=t,this.n=e,this.i=0}return e.prototype["@@transducer/init"]=o.Z.init,e.prototype["@@transducer/result"]=o.Z.result,e.prototype["@@transducer/step"]=function(e,t){this.i+=1;var r=0===this.n?e:this.xf["@@transducer/step"](e,t);return this.n>=0&&this.i>=this.n?(0,i.Z)(r):r},e}();const c=(0,n.Z)((function(e,t){return new s(e,t)}));var d=r(9324);const u=(0,n.Z)((0,a.Z)(["take"],c,(function(e,t){return(0,d.Z)(0,e<0?1/0:e,t)})))}}]);